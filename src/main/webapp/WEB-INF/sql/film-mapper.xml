<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="FilmRepository">

   <select id="select" resultType="map">
    SELECT * FROM FILM WHERE film_id = ${value}
  </select>

   <select id="selectAll" resultType="map">
    SELECT * FROM FILM
  </select>

   <select id="selectByTitle" resultType="map">
        select f.title, f.description, f.release_year, f.rating ,c.name, a.first_name
From film f, category c, actor a
Where f.title like '%${value}%'
and c.category_id in
(select c.category_id
from category c ,film_category fc
Where c.category_id = fc.category_id)
and a.actor_id in
(select a.actor_id
from actor a ,film_actor ac
Where a.actor_id = ac.actor_id)
  </select>

   <select id="selectByActor" resultType="map">
        select * from film
        where film_id in
        (
            select fa.film_id  from film_actor fa, actor a
            where a.last_name like '%${value}%' and a.actor_id = fa.actor_id
        )
  </select>


</mapper>